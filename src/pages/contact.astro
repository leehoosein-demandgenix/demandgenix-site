---
// src/pages/contact.astro
// Complete DemandGenix contact page - just copy and paste this entire file
import Layout from '../layouts/Layout.astro';
import Footer from '../components/Footer.astro';
---

<Layout 
  title="Contact DemandGenix | Free Demand Gen Consultation"
  description="Get expert help with your B2B demand generation challenges. Free 30-minute diagnostic call to identify what's holding you back."
  keywords="demand generation consultation, B2B marketing help, SaaS marketing, conversion optimization"
>
  <main class="contact-main">
    <div class="contact-page-header">
      <h1>Ready to scale your demand gen?</h1>
      <p>Let's figure out what's holding you back and build a plan that scales with your business. Quick 30-minute diagnostic call to get started (no MBA required).</p>
    </div>

    <div class="form-container">
      <div id="contact-form-section">
        <h2 class="form-title">Get in Touch</h2>
        <p class="form-subtitle">Fill out the form below and we'll get back to you within 24 hours.</p>
        
        <form id="contact-form">
          <div class="form-row">
            <div class="form-group">
              <label for="firstname" class="form-label">First Name <span class="required">*</span></label>
              <input 
                type="text" 
                id="firstname" 
                name="firstname" 
                class="form-input" 
                placeholder="Your first name"
                required
              >
              <div class="error-message" id="firstname-error">Please enter your first name</div>
            </div>

            <div class="form-group">
              <label for="lastname" class="form-label">Last Name <span class="required">*</span></label>
              <input 
                type="text" 
                id="lastname" 
                name="lastname" 
                class="form-input" 
                placeholder="Your last name"
                required
              >
              <div class="error-message" id="lastname-error">Please enter your last name</div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="email" class="form-label">Work Email <span class="required">*</span></label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                class="form-input" 
                placeholder="your.email@company.com"
                required
              >
              <div class="error-message" id="email-error">Please enter a valid email address</div>
            </div>

            <div class="form-group">
              <label for="phone" class="form-label">Phone Number</label>
              <input 
                type="tel" 
                id="phone" 
                name="phone" 
                class="form-input" 
                placeholder="+44 7XXX XXXXXX"
              >
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="company" class="form-label">Company <span class="required">*</span></label>
              <input 
                type="text" 
                id="company" 
                name="company" 
                class="form-input" 
                placeholder="Your company name"
                required
              >
              <div class="error-message" id="company-error">Please enter your company name</div>
            </div>

            <div class="form-group">
              <label for="jobtitle" class="form-label">Job Title <span class="required">*</span></label>
              <input 
                type="text" 
                id="jobtitle" 
                name="jobtitle" 
                class="form-input" 
                placeholder="e.g., Head of Marketing"
                required
              >
              <div class="error-message" id="jobtitle-error">Please enter your job title</div>
            </div>
          </div>

          <div class="form-group full-width">
            <label for="company_size" class="form-label">Company Size</label>
            <select id="company_size" name="company_size" class="form-input">
              <option value="">Select company size</option>
              <option value="1-10">1-10 employees</option>
              <option value="11-50">11-50 employees</option>
              <option value="51-200">51-200 employees</option>
              <option value="201-500">201-500 employees</option>
              <option value="501+">501+ employees</option>
            </select>
          </div>

          <div class="form-group full-width">
            <label for="challenge" class="form-label">What's your biggest demand gen challenge? <span class="required">*</span></label>
            <textarea 
              id="challenge" 
              name="challenge" 
              class="form-input form-textarea" 
              placeholder="Tell us about your current challenges with lead generation, conversion rates, attribution, or scaling demand..."
              required
            ></textarea>
            <div class="error-message" id="challenge-error">Please describe your main challenge</div>
          </div>

          <div class="form-group full-width">
            <label for="timeline" class="form-label">When are you looking to get started?</label>
            <select id="timeline" name="timeline" class="form-input">
              <option value="">Select timeline</option>
              <option value="asap">ASAP - Within 2 weeks</option>
              <option value="month">Within a month</option>
              <option value="quarter">Within this quarter</option>
              <option value="exploring">Just exploring options</option>
            </select>
          </div>

          <!-- Hidden fields for tracking -->
          <input type="hidden" name="lead_source" value="Website Contact Form">
          <input type="hidden" name="page_url" id="page_url">
          <input type="hidden" name="utm_source" id="utm_source">
          <input type="hidden" name="utm_medium" id="utm_medium">
          <input type="hidden" name="utm_campaign" id="utm_campaign">

          <button type="submit" class="form-submit" id="submit-btn">
            Get Started - Free 30min Diagnostic
          </button>

          <p class="privacy-note">
            We respect your privacy. By submitting this form, you agree to our 
            <a href="/privacy-policy">Privacy Policy</a>. 
            We'll only use your information to respond to your inquiry and send relevant demand gen insights.
          </p>
        </form>
      </div>

      <div class="success-container" id="success-section">
        <div class="success-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h2 class="success-title">Thanks for reaching out!</h2>
        <p class="success-message">
          We've received your message and will get back to you within 24 hours 
          (usually much faster during UK business hours).
        </p>
        <div class="success-details">
          <h3>What happens next?</h3>
          <ul>
            <li><strong>Quick Response:</strong> We'll email you within 24 hours (usually much faster)</li>
            <li><strong>Discovery Call:</strong> 30-minute call to understand your challenges and goals</li>
            <li><strong>Tailored Proposal:</strong> Custom proposal with clear outcomes and transparent pricing</li>
          </ul>
        </div>
        <p style="color: var(--warm-grey);">
          In the meantime, feel free to check out our 
          <a href="/case-studies" style="color: var(--forest-green);">case studies</a> 
          or <a href="/services" style="color: var(--forest-green);">services</a>.
        </p>
      </div>
    </div>

    <div class="contact-info">
      <div class="contact-card">
        <h3>Location</h3>
        <p>Manchester, UK</p>
        <p>Serving UK, EU & US remotely</p>
      </div>
      <div class="contact-card">
        <h3>Response Time</h3>
        <p>Within 24 hours</p>
        <p>Usually much faster during UK business hours</p>
      </div>
      <div class="contact-card">
        <h3>Direct Contact</h3>
        <p>hello@demandgenix.uk</p>
        <p>+44 (0) 7702 786 365</p>
      </div>
    </div>

    <!-- HubSpot Tracking Code - REPLACE YOUR_PORTAL_ID with your actual HubSpot Portal ID -->
    <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/YOUR_PORTAL_ID.js"></script>
  </main>
  <Footer />
</Layout>

<style>
  /* Import DemandGenix brand font */
  @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap');

  /* DemandGenix Brand Colors from Brand Guidelines */
  :root {
    --forest-green: #059669;
    --forest-green-dark: #047857;
    --warm-orange: #EA580C;
    --charcoal-grey: #374151;
    --warm-grey: #6B7280;
    --light-grey: #F8FAFC;
  }

  .contact-main {
    font-family: 'Plus Jakarta Sans', system-ui, sans-serif;
    background-color: var(--light-grey);
    min-height: 100vh;
    padding: 20px;
    line-height: 1.6;
  }

  .contact-page-header {
    text-align: center;
    margin-bottom: 40px;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
  }

  .contact-page-header h1 {
    font-size: 32px;
    font-weight: 700;
    color: var(--charcoal-grey);
    margin-bottom: 16px;
  }

  .contact-page-header p {
    font-size: 18px;
    color: var(--warm-grey);
    max-width: 600px;
    margin: 0 auto;
  }

  .form-container {
    max-width: 600px;
    margin: 0 auto;
    background: white;
    padding: 40px;
    border-radius: 8px;
    border: 1px solid #E5E7EB;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  }

  .form-title {
    font-size: 24px;
    font-weight: 600;
    color: var(--charcoal-grey);
    margin-bottom: 8px;
    text-align: center;
  }

  .form-subtitle {
    color: var(--warm-grey);
    text-align: center;
    margin-bottom: 32px;
    font-size: 16px;
    line-height: 1.5;
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
  }

  .form-group {
    margin-bottom: 24px;
  }

  .form-group.full-width {
    grid-column: 1 / -1;
  }

  .form-label {
    display: block;
    font-weight: 500;
    color: var(--charcoal-grey);
    margin-bottom: 8px;
    font-size: 14px;
  }

  .required {
    color: var(--warm-orange);
  }

  .form-input {
    width: 100%;
    padding: 14px 16px;
    border: 2px solid #E5E7EB;
    border-radius: 6px;
    font-family: 'Plus Jakarta Sans', system-ui, sans-serif;
    font-size: 16px;
    color: var(--charcoal-grey);
    background: white;
    transition: all 0.2s ease;
    box-sizing: border-box;
  }

  .form-input:focus {
    outline: none;
    border-color: var(--forest-green);
    box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.1);
  }

  .form-input::placeholder {
    color: var(--warm-grey);
  }

  .form-textarea {
    min-height: 120px;
    resize: vertical;
    font-family: 'Plus Jakarta Sans', system-ui, sans-serif;
  }

  .form-submit {
    width: 100%;
    background: var(--forest-green);
    color: white;
    border: none;
    border-radius: 6px;
    padding: 16px 24px;
    font-family: 'Plus Jakarta Sans', system-ui, sans-serif;
    font-weight: 500;
    font-size: 16px;
    cursor: pointer;
    transition: background-color 0.2s ease;
    margin-top: 16px;
  }

  .form-submit:hover {
    background: var(--forest-green-dark);
  }

  .form-submit:disabled {
    background: #9CA3AF;
    cursor: not-allowed;
  }

  .error-message {
    color: #DC2626;
    font-size: 14px;
    margin-top: 6px;
    display: none;
  }

  .success-container {
    text-align: center;
    padding: 40px 20px;
    display: none;
  }

  .success-icon {
    width: 64px;
    height: 64px;
    background: var(--forest-green);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 24px;
  }

  .success-title {
    font-size: 24px;
    font-weight: 600;
    color: var(--charcoal-grey);
    margin-bottom: 12px;
  }

  .success-message {
    font-size: 16px;
    color: var(--warm-grey);
    margin-bottom: 24px;
    line-height: 1.5;
  }

  .success-details {
    background: var(--light-grey);
    padding: 24px;
    border-radius: 6px;
    margin-bottom: 24px;
    text-align: left;
  }

  .success-details h3 {
    font-size: 18px;
    font-weight: 600;
    color: var(--charcoal-grey);
    margin-bottom: 16px;
    text-align: center;
  }

  .success-details ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .success-details li {
    padding: 8px 0;
    color: var(--warm-grey);
    border-bottom: 1px solid #E5E7EB;
  }

  .success-details li:last-child {
    border-bottom: none;
  }

  .privacy-note {
    font-size: 13px;
    color: var(--warm-grey);
    text-align: center;
    margin-top: 24px;
    line-height: 1.5;
  }

  .privacy-note a {
    color: var(--forest-green);
    text-decoration: none;
  }

  .privacy-note a:hover {
    text-decoration: underline;
  }

  /* Mobile responsiveness */
  @media (max-width: 1024px) {
    .hero-title {
      font-size: 40px;
    }
    
    .hero-subtitle {
      font-size: 18px;
    }
    
    .contact-container {
      gap: 32px;
    }
    
    .form-container,
    .proof-container,
    .what-happens-next {
      padding: 28px;
    }
  }

  @media (max-width: 768px) {
    .hero-section {
      min-height: 50vh;
    }
    
    .hero-content {
      padding: 60px 20px;
    }
    
    .hero-title {
      font-size: 32px;
      margin-bottom: 20px;
    }
    
    .hero-subtitle {
      font-size: 16px;
    }
    
    .contact-main {
      padding: 16px;
    }
    
    .contact-container {
      grid-template-columns: 1fr;
      gap: 24px;
    }
    
    .form-container,
    .proof-container,
    .what-happens-next {
      padding: 24px;
    }
    
    .form-row {
      grid-template-columns: 1fr;
      gap: 0;
    }
    
    .contact-info-section {
      gap: 16px;
    }
    
    .contact-info-card {
      padding: 16px;
    }
    
    .next-steps {
      gap: 20px;
    }
  }

  @media (max-width: 480px) {
    .hero-title {
      font-size: 28px;
    }
    
    .hero-subtitle {
      font-size: 15px;
    }
    
    .hero-content {
      padding: 40px 16px;
    }
  }

  .contact-card {
    background: white;
    padding: 24px;
    border-radius: 8px;
    border: 1px solid #E5E7EB;
    text-align: center;
  }

  .contact-card h3 {
    font-size: 18px;
    font-weight: 600;
    color: var(--charcoal-grey);
    margin-bottom: 12px;
  }

  .contact-card p {
    color: var(--warm-grey);
    margin: 8px 0;
  }

  /* Loading spinner animation */
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>

<script>
  // Capture UTM parameters and page info
  document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const pageUrlField = document.getElementById('page_url');
    const utmSourceField = document.getElementById('utm_source');
    const utmMediumField = document.getElementById('utm_medium');
    const utmCampaignField = document.getElementById('utm_campaign');
    
    if (pageUrlField) pageUrlField.value = window.location.href;
    if (utmSourceField) utmSourceField.value = urlParams.get('utm_source') || '';
    if (utmMediumField) utmMediumField.value = urlParams.get('utm_medium') || '';
    if (utmCampaignField) utmCampaignField.value = urlParams.get('utm_campaign') || '';
  });

  // Form submission handler
  document.getElementById('contact-form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const form = this;
    const submitBtn = document.getElementById('submit-btn');
    const formSection = document.getElementById('contact-form-section');
    const successSection = document.getElementById('success-section');
    
    // Clear previous errors
    document.querySelectorAll('.error-message').forEach(el => el.style.display = 'none');
    
    // Validate form
    let isValid = true;
    const requiredFields = ['firstname', 'lastname', 'email', 'company', 'jobtitle', 'challenge'];
    let firstErrorField = null;
    
    requiredFields.forEach(field => {
      const input = document.getElementById(field);
      const error = document.getElementById(field + '-error');
      
      if (!input.value.trim()) {
        error.style.display = 'block';
        isValid = false;
        if (!firstErrorField) {
          firstErrorField = input;
        }
      }
    });
    
    // Email validation
    const email = document.getElementById('email');
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (email.value && !emailRegex.test(email.value)) {
      document.getElementById('email-error').textContent = 'Please enter a valid email address';
      document.getElementById('email-error').style.display = 'block';
      isValid = false;
      if (!firstErrorField) {
        firstErrorField = email;
      }
    }
    
    // Focus on first error field
    if (!isValid && firstErrorField) {
      firstErrorField.focus();
      firstErrorField.scrollIntoView({ behavior: 'smooth', block: 'center' });
      return;
    }
    
    // Disable submit button and show loading state
    submitBtn.disabled = true;
    submitBtn.innerHTML = `
      <svg style="animation: spin 1s linear infinite; width: 16px; height: 16px; display: inline-block; margin-right: 8px;" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" opacity="0.3"/>
        <path d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" fill="currentColor"/>
      </svg>
      Sending...
    `;
    
    // Collect form data
    const formData = new FormData(form);
    const data = Object.fromEntries(formData);
    
    // Simulate form submission (HubSpot tracking will capture this automatically)
    setTimeout(() => {
      showSuccess();
      
      // Track with HubSpot if tracking code is loaded
      if (typeof hbspt !== 'undefined') {
        console.log('HubSpot tracking available - form submission tracked');
        
        // Optional: Trigger HubSpot event
        try {
          hbspt.forms.create({
            portalId: "YOUR_PORTAL_ID", // Replace with your Portal ID
            formId: "PLACEHOLDER_FORM_ID", // This can be any ID for tracking purposes
            target: document.createElement('div'), // Hidden target
            onFormSubmit: function($form) {
              console.log('HubSpot form event triggered');
            }
          });
        } catch (e) {
          console.log('HubSpot form creation not needed - tracking code handles submission');
        }
      }
      
      // Track with Google Analytics if available
      if (typeof gtag !== 'undefined') {
        gtag('event', 'form_submit', {
          event_category: 'engagement',
          event_label: 'contact_form'
        });
      }
      
      // Track with any other analytics platforms
      if (typeof dataLayer !== 'undefined') {
        dataLayer.push({
          'event': 'contact_form_submission',
          'form_name': 'demand_gen_contact',
          'company': data.company,
          'lead_source': data.lead_source
        });
      }
      
    }, 1500); // Realistic loading time
    
    function showSuccess() {
      formSection.style.display = 'none';
      successSection.style.display = 'block';
      
      // Scroll to top of success message
      successSection.scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
      });
    }
  });
</script>